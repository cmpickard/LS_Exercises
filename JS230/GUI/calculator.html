<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Calculator</title>
  <style>
    body {
      background-color: lightgreen;
    }
    #calculator {
      width: 366px;
      height: 346px;
      margin: 50px auto;
      background: #fff;
      border-radius: 4px;
      border-color: black;
      border-style: solid;
      padding: 5px;
      box-sizing: border-box;
      background-color:aliceblue;
    }

    #buttons {
      display: grid;
      width: 350px;
      height: 250px;
      grid-template:
      "a a a a" 50px
      "a a a a" 50px
      "a a a a" 50px
      "a a a a" 50px
      "a a a a" 50px / 1fr 1fr 1fr 1fr;
    }

    #screen {
      border-bottom: 1px solid lightgray;
      height: 70px;
      width: 350px;
      margin-bottom: 10px;
      text-align: end;
      font-size: 18px;
      font-weight: bold;
      font-family: 'Arial Narrow Bold', sans-serif;
    }

    #entry-top {
      margin-bottom: 10px;
    }

    #entry-bottom {
      font-size: 30px;
    }

    .button {
      margin: 1px;
      font-size: 18px;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    }

    .hidden {
      color: aliceblue;
    }

    .visible {
      color: black;
    }
  </style>
  <script>
    class CalculatorManager {
      static BUTTON_NAMES = {
        ce: 'clear-entry',
        c: 'clear-all',
        one: '1',
        two: '2',
        three: '3',
        four: '4',
        five: '5',
        six: '6',
        seven: '7',
        eight: '8',
        nine: '9',
        zero: '0',
        ce: 'clear',
        c:'clear-all',
        neg: 'negative',
        divide: '/',
        times: '*',
        minus: '-',
        plus: '+',
        equals: 'equals',
        point: 'point',
        modulo: '%',
      }

      constructor() {
        document.addEventListener('DOMContentLoaded', () => {
          this.windowTop = document.getElementById('entry-top');
          this.windowBottom = document.getElementById('entry-bottom');
          this.buttons = document.getElementById('buttons');
          this.resetWindow();
          this.attachListeners();
        })

      }

      resetWindow(fullClear = true) {
        this.windowBottom.textContent = '0';
        this.windowBottom.dataset.cleared = 'true';
        if (fullClear) {
          this.windowTop.textContent = '.';
          this.windowTop.classList.add('hidden');
          this.windowTop.classList.remove('visible');
        }
      }

      bankValue() {
        let value = this.windowBottom.textContent;
        this.windowTop.textContent = value;
        this.windowTop.classList.add('visible');
        this.windowTop.classList.remove('hidden');
        this.resetWindow(false);
      }

      handleNumber(value) {
        if (this.windowBottom.dataset.cleared === 'true' && value === '0') {
          return;
        } else if (this.windowBottom.dataset.cleared === 'true') {
          this.windowBottom.textContent = '';
          this.windowBottom.dataset.cleared = 'false';
        }

        this.windowBottom.textContent += value;
      }

      handleDecimal() {
        if (this.windowBottom.dataset.cleared === 'true') {
          this.windowBottom.textContent = '0.';
          this.windowBottom.dataset.cleared = 'false';
        } else if (!/\./.test(this.windowBottom.textContent)){
          this.windowBottom.textContent += '.';
        }
      }

      handleNegative() {
        if (this.windowBottom.textContent[0] === '-') {
          this.windowBottom.textContent = this.windowBottom.textContent.slice(1);
        } else {
          this.windowBottom.textContent = '-' + this.windowBottom.textContent;
        }
      }

      calculate() {
        let operator = this.windowTop.textContent.slice(-1);
        let firstNum = Number(this.windowTop.textContent.slice(0, -1));
        let secondNum = Number(this.windowBottom.textContent);
        let result;
        if (operator === '+') {
          result = firstNum + secondNum;
        } else if (operator === '-') {
          result = firstNum - secondNum;
        } else if (operator === '*') {
          result = firstNum * secondNum;
        } else if (operator === '/') {
          result = firstNum / secondNum;
        } else if (operator === '%') {
          result = firstNum % secondNum;
        }

        return result;
      }

      displayResult(result) {
        this.resetWindow();
        this.windowBottom.textContent = result;
        this.windowBottom.dataset.cleared = 'false';
        this.windowBottom.dataset.answer = 'true';
      }

      attachListeners() {
        this.buttons.addEventListener('click', (event) => {
          let button = event.target;
          let id = button.id;
          let value = CalculatorManager.BUTTON_NAMES[id];

          if (this.windowBottom.dataset.answer === 'true') {
            this.resetWindow();
            this.windowBottom.dataset.answer = 'false';
          }

          if (/[0-9]/.test(value)) {
            this.handleNumber(value);
          } else if (value === 'equals') {
            let result = this.calculate();
            this.displayResult(result);
          } else if (value === 'point') {
            this.handleDecimal();
          } else if (value === 'negative') {
            this.handleNegative();
          } else if (value === 'clear') {
            this.resetWindow(false);
          } else if (value === 'clear-all') {
            this.resetWindow();
          } else if (!this.windowTop.classList.contains('visible')) {
            this.windowBottom.textContent += value;
            this.bankValue();
          }          
        });
      }
    }

    let manager = new CalculatorManager();
  </script>
</head>
<body>
  <main id="calculator" data-result="false">
    <section id="screen">
      <div id="entry-top" class="hidden">.</div>
      <div id="entry-bottom" data-cleared="true">0</div>
    </section>
    <section id="buttons">
      <button class="button" id="ce">CE</button>
      <button class="button" id="c">C</button>
      <button class="button" id="neg">NEG</button>
      <button class="button" id="divide">/</button>
      <button class="button" id="seven">7</button>
      <button class="button" id="eight">8</button>
      <button class="button" id="nine">9</button>
      <button class="button" id="times">*</button>
      <button class="button" id="four">4</button>
      <button class="button" id="five">5</button>
      <button class="button" id="six">6</button>
      <button class="button" id="minus">-</button>
      <button class="button" id="one">1</button>
      <button class="button" id="two">2</button>
      <button class="button" id="three">3</button>
      <button class="button" id="plus">+</button>
      <button class="button" id="zero">0</button>
      <button class="button" id="point">.</button>
      <button class="button" id="modulo">%</button>
      <button class="button" id="equals">=</button>
    </section>
  </main>
</body>
</html>

<!-- Build A GUI standard calculator with the following specifications:

Specifications
Calculator screen

The calculator should have a screen like a standard calculator. The screen
should have two parts:

A lower part—the entry window—that shows the current entry: the number you
are entering or the most recent result.
An upper part—the operation window—that shows the operation in progress,
e.g., 1 + 5 / 2 +

Calculator buttons
The calculator should have functioning buttons for the following:

All digits: 0-9
., +, -, /, *, %, =, NEG, C, CE
The NEG button negates the value in the entry window.
The CE button clears the entry window and replaces it with 0.
The C button clears both the entry and operation windows and leaves a value
of 0 in the entry window.

Operations
When the user clicks a digit button, append the digit to the number in the
entry window. If the value in the entry window is 0, replace the 0 with the
entered digit.
When the user clicks an operator button, copy the current entry and the
operator into the operation window. You can leave the current entry in the
entry window or set it to 0, but, either way, the next digit entered should
begin a new number. Note that % is the modulo operator.
When the user clicks the = button, use the current operation and the current
entry to calculate the final result. Clear the current operation window and
display the result in the entry window. -->