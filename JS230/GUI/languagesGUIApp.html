<!DOCTYPE html>
<!-- // Requirements
// Create a collection of programming languages of your choice.
// Display a heading and a paragraph for each programming language.
// Initially, display the first 120 characters for each paragraph.
// There is a Show More button for each programming language.

// Functionality
// When the user clicks the Show More button:
// Display the entire paragraph about the corresponding language.
// Change the button text to Show Less.

// When the user clicks the Show Less button:
// Change the button text to Show More.
// Hide all but the first 120 characters of the paragraph text.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Programming Languages</title>
  <style></style>
  <script>
    const langSummary = [
      {
        name: 'Ruby',
        description: 'Ruby is a dynamic, reflective, object-oriented, ' +
                    'general-purpose programming language. It was designed and developed in the mid-1990s ' +
                    'by Yukihiro Matsumoto in Japan. According to its creator, Ruby was influenced by Perl, ' +
                    'Smalltalk, Eiffel, Ada, and Lisp. It supports multiple programming paradigms, ' +
                    'including functional, object-oriented, and imperative. It also has a dynamic type ' +
                    'system and automatic memory management.'
      },

      {
        name: 'JavaScript',
        description: 'JavaScript is a high-level, dynamic, untyped, and interpreted ' +
                    'programming language. It has been standardized in the ECMAScript language ' +
                    'specification. Alongside HTML and CSS, JavaScript is one of the three core ' +
                    'technologies of World Wide Web content production; the majority of websites employ ' +
                    'it, and all modern Web browsers support it without the need for plug-ins. JavaScript ' +
                    'is prototype-based with first-class functions, making it a multi-paradigm language, ' +
                    'supporting object-oriented, imperative, and functional programming styles.'
      },

      {
        name: 'Lisp',
        description: 'Lisp (historically, LISP) is a family of computer programming languages ' +
                    'with a long history and a distinctive, fully parenthesized prefix notation. ' +
                    'Originally specified in 1958, Lisp is the second-oldest high-level programming ' +
                    'language in widespread use today. Only Fortran is older, by one year. Lisp has changed ' +
                    'since its early days, and many dialects have existed over its history. Today, the best ' +
                    'known general-purpose Lisp dialects are Common Lisp and Scheme.'
      },
    ];

    class PageManager {
      constructor() {
        this.languages = this.createLanguages(langSummary);
        this.setupSections();
      }

      createLanguages(languages) {
        return languages.map(lang => new Language(lang.name, lang.description));
      }

      setupSections() {
        let main = document.querySelector('main');
        this.languages.forEach((lang, idx) => {
          let section = document.createElement('section');
          let h2 = document.createElement('h2');
          let button = document.createElement('button');
          let paragraph = document.createElement('p');
          paragraph.textContent = this.truncate(lang.description);
          h2.textContent = lang.name;
          button.textContent = 'See More';
          button.dataset.expanded = 'false';
          section.appendChild(h2);
          section.appendChild(paragraph);
          section.appendChild(button);
          section.dataset.idx = idx;
          main.appendChild(section);
        });
      }

      displayMore(section) {
        let idx = section.dataset.idx;
        let description = this.languages[idx].description;
        section.querySelector('p').textContent = description;
        let button = section.querySelector('button');
        button.textContent = 'See Less';
        button.dataset.expanded = 'true';
      }

      displayLess(section) {
        let idx = section.dataset.idx;
        let desc = this.languages[idx].description;
        section.querySelector('p').textContent = this.truncate(desc);
        let button = section.querySelector('button');
        button.textContent = 'See More';
        button.dataset.expanded = 'false';
      }

      truncate(description) {
        let length = description.length;
        return length < 120 ? length : description.slice(0,120) + '...';
      }
    }

    class Language {
      constructor(name, description) {
        this.name = name;
        this.description = description;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      let pageManager = new PageManager();
      
      document.getElementById('main').addEventListener('click', (event) => {
        let button = event.target;
        let section = button.closest('section');
        if (button.tagName !== 'BUTTON') return;

        if (button.dataset.expanded === 'false') {
          pageManager.displayMore(section);
        } else {
          pageManager.displayLess(section);
        }
      });
    })
  </script>
</head>
<body>
  <main id="main">
    <h1>Programming Languages</h1>
  </main>
</body>
</html>